{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Filter","handleSearchChange","htmlFor","onChange","name","PersonFrom","handleSubmit","handleNameChange","handleNumberChange","newName","newNumber","onSubmit","value","type","Persons","persons","searchTerm","handleDelete","displayPersons","filter","person","toLowerCase","includes","map","key","id","number","onClick","Notification","message","messageStyle","color","backgroundColor","fontSize","borderStyle","borderRadius","padding","marginBottom","style","text","baseUrl","axios","get","newPerson","post","updatedPerson","put","delete","App","useState","setPersons","setNewName","setNewNumber","setSearchTerm","setMessage","useEffect","personService","then","response","data","cleanUpTasks","setTimeout","errorHandling","error","console","log","event","target","PersonForm","e","preventDefault","some","toLocaleLowerCase","window","confirm","currentPerson","find","obj","catch","concat","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.97e6818d.chunk.js","sourcesContent":["import React from 'react';\n\nconst Filter = ({handleSearchChange}) => {\n    return (\n        <>\n            <label htmlFor=\"filter\">filter shown with</label>\n            <input onChange={handleSearchChange} name=\"filter\" />\n        </>\n    )\n}\n\nexport default Filter;\n","import React from 'react';\n\nconst PersonFrom = ({handleSubmit, handleNameChange, handleNumberChange, newName, newNumber}) => {\n  return (\n    <form onSubmit={handleSubmit}>\n      <div>\n        <label htmlFor=\"name\">name:</label>\n        <input onChange={handleNameChange} value={newName} name=\"name\" />\n        <br/>\n        <label htmlFor=\"number\">number</label>\n        <input onChange={handleNumberChange} value={newNumber} name=\"number\" />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n  </form>\n  )\n}\n\nexport default PersonFrom;","import React from 'react';\n\nconst Persons = ({persons, searchTerm, handleDelete}) => {\n    const displayPersons = persons.filter(person => (person.name.toLowerCase().includes(searchTerm)));\n    // console.log(displayPersons);  // Debug\n\n    return (\n        <>\n        {displayPersons.map(person =>  <p key={person.id}>{person.name} {person.number} <button onClick={() => handleDelete(person.id, person.name)}>delete</button> </p>)}\n        </>\n    )\n}\n\nexport default Persons;\n","import React from 'react';\n\nconst Notification = ({ message }) => {\n\n    if (message === null) {\n        return null;\n    }\n\n    else {\n        let messageStyle = {\n            color: message.id,\n            backgroundColor: 'lightgray',\n            fontSize: 20,\n            borderStyle: 'solid',\n            borderRadius: 5,\n            padding: 10,\n            marginBottom: 10\n        };\n\n        return (\n            <div style={messageStyle}>\n                {message.text}\n            </div>\n        )\n    }\n}\n\nexport default Notification;","import axios from 'axios';\n\nconst baseUrl = \"/api/persons\"\n\nconst getPersons = () => {\n    return axios.get(baseUrl);\n}\n\nconst postPerson = (newPerson) => {\n    return axios.post(baseUrl, newPerson);\n}\n\nconst updatePerson = (id, updatedPerson) => {\n    return axios.put(`${baseUrl}/${id}`, updatedPerson);\n}\n\nconst deletePerson = (id) => {\n    return axios.delete(`${baseUrl}/${id}`);\n}\n\nexport default {\n    getPersons,\n    postPerson,\n    updatePerson,\n    deletePerson\n};","import React, {useState, useEffect} from 'react';\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\nimport Notification from './components/Notification';\nimport personService from './services/persons';\n//import './index.css'; // Alternative solution with centralized stylesheet\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]) \n  const [ newName, setNewName ] = useState('');\n  const [ newNumber, setNewNumber ] = useState('');\n  const [ searchTerm, setSearchTerm ] = useState('');\n  const [ message, setMessage ] = useState(null);\n\n\n  // Getting Initial persons array\n  useEffect(() => {\n    // console.log(\"effecting!\");  // Debug\n    personService.getPersons().then(response => setPersons(response.data));\n  }, []);\n\n  // Controlled Components\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  }\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  }\n  const handleSearchChange = (event) => {\n    setSearchTerm(event.target.value.toLowerCase());\n  }\n\n  // Helper Functions\n  const cleanUpTasks = (name) => {\n    setNewName('');\n    setNewNumber('');\n    setMessage({\n      text: `Added ${name}`,\n      id: 'green'\n    })\n    setTimeout(() => setMessage(null, 5000));\n  }\n\n  const errorHandling = (error, name) => {\n    console.log(error);\n    setMessage({\n      text: error,\n      id: 'red'\n    })\n    setTimeout(() => setMessage(null), 5000);\n  }\n\n  // Create and Update\n  const handleSubmit = (e) => {\n    e.preventDefault()\n    const newPerson = {\n      name: newName,\n      number: newNumber\n    }\n    // Included '.toLowerCase()' to person.name and newPerson.name to also match lower case matches\n    if (persons.some(person => person.name.toLowerCase() === newPerson.name.toLocaleLowerCase())) {\n      const userChoice = window.confirm(`${newPerson.name} is already added to phonebook, replace the old number with a new one?`);\n\n      if (userChoice) {\n        const currentPerson = persons.find(obj => obj.name === newPerson.name);\n        personService\n          .updatePerson(currentPerson.id, newPerson)\n          .then((response) => {\n            setPersons(persons.map(person => person.id !== currentPerson.id ? person : response.data));\n            cleanUpTasks(response.name);\n          })\n          .catch(error => {\n            errorHandling(error.response.data.error, currentPerson.name);\n            // setPersons(persons.filter(obj => (obj.id !== currentPerson.id)));  Disabled since Validators should not lead to deletion of elements in the frontend\n          })\n        }\n    }\n    else {\n      personService\n        .postPerson(newPerson)\n        .then((response) => {\n          setPersons(persons.concat(response.data));\n          cleanUpTasks(newPerson.name);\n        })\n        .catch(error => {\n          errorHandling(error.response.data.error, newPerson.name)\n        })\n      }\n  }\n\n  // Deletion\n  const handleDelete = (id, name) => {\n    const userChoice = window.confirm(`Delete ${name}?`);\n\n    if (userChoice) {\n      personService.deletePerson(id)\n      .then(response => setPersons(persons.filter(obj => (obj.id !== id))))\n      .catch(error => {\n        errorHandling(error.response.data.error, name);\n      })\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <Filter handleSearchChange={handleSearchChange}/>\n      <h3>add a new</h3>\n      <PersonForm\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n        newName={newName}\n        newNumber={newNumber}\n        handleSubmit={handleSubmit}\n        />\n      <h3>Numbers</h3>\n        <Persons\n          persons={persons}\n          searchTerm={searchTerm}\n          handleDelete={handleDelete}\n          />\n    </div>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}